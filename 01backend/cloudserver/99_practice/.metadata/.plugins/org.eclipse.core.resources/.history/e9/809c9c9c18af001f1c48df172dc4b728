package board.service;

import java.util.Optional;

import org.springframework.stereotype.Service;

import board.dto.UserDto;
import board.entity.User;
import board.repository.UserRepository;
import lombok.RequiredArgsConstructor;

@RequiredArgsConstructor
@Service
public class UserService {
	
	private final UserRepository userRepository;

	
	
	public void registerUser(UserDto userDto) {
	 
		//서비스에선 엔티티를 만들어준다.
		User user= userDto.toEntity();	
		// 레파지토리를 저장한다. 
		userRepository.save(user);
	}
	
	// Security에서 사용하는 메서드 : User 엔티티 검색
	public Optional<User> searchUser(String username){
		 return userRepository.findByUsername(username); // User 엔티티 그대로 반환
	}
	
	


	
	// UserDto로 변환하여 검색 (필요 시 사용)
	public Optional<UserDto> searchUser(String uid) {
		return userRepository.findById(uid)
				// dto로 변환해서 줌.
				.map(UserDto::from);
	}

}
